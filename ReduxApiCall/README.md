# React + Redux

## Redux api call:

### Create store(`/store.js`)

```js
import { configureStore } from "@reduxjs/toolkit";
import todoSlice from "../slice/todoSlice";

const store = configureStore({
  reducer: {
    todo: todoSlice,
  },
});

export default store;
```

### Create slice(`/slice.js`)

```js
// Import necessary functions from @reduxjs/toolkit
import { createSlice, createAsyncThunk } from "@reduxjs/toolkit";

// Define an asynchronous thunk action for fetching todos from an API
export const fetchTodos = createAsyncThunk("fetchTodos", async () => {
  // Make an API call to fetch todos from the provided URL
  const response = await fetch("https://jsonplaceholder.typicode.com/todos");
  // Log the response to the console
  console.log(response);
  // Return the response in JSON format
  return response.json();
});

// Create a slice of the Redux state for managing todo-related data
export const todoSlice = createSlice({
  name: "todo", // Name of the slice
  initialState: {
    isLoading: false, // Indicates if data is being loaded
    data: null, // Holds the fetched todos data
    isError: false, // Indicates if there was an error in fetching data
  },

  // Define how the state changes in response to different actions
  extraReducers: (builder) => {
    // When the fetchTodos action is pending (i.e., the API call is in progress)
    builder.addCase(fetchTodos.pending, (state, action) => {
      state.isLoading = true; // Set isLoading to true
    });

    // When the fetchTodos action is fulfilled (i.e., the API call was successful)
    builder.addCase(fetchTodos.fulfilled, (state, action) => {
      state.isLoading = false; // Set isLoading to false
      state.data = action.payload; // Set the data to the fetched todos
    });

    // When the fetchTodos action is rejected (i.e., the API call failed)
    builder.addCase(fetchTodos.rejected, (state, action) => {
      console.log("Error", action.payload); // Log the error to the console
      state.isError = true; // Set isError to true
    });
  },
});

// Export the reducer function generated by the slice
export default todoSlice.reducer;
```

### Code(`App.jsx`):

```jsx
// Import necessary functions from react-redux
import { useDispatch , useSelector } from 'react-redux';

// Import CSS styles
import './App.css';

// Import the fetchTodos function from the todoSlice
import { fetchTodos } from './slice/todoSlice';

// Define the main App component
function App() {
  // Get the dispatch function to dispatch actions
  const dispatch = useDispatch();

  // Get the state from the Redux store
  const state = useSelector((state) => state);

  // Check if the todos are loading, if so, display a loading message
  if(state.todo.isLoading){
    return (<h1>Loading...</h1>);
  }

  // Render the main component
  return (
    <>
      <h1>Redux with Api call </h1>
      {/* Button to fetch todos, dispatches the fetchTodos action when clicked */}
      <button onClick={(e) => dispatch(fetchTodos())}>Fetch todo</button>
      
      {/* Display the list of todos */}
      <div>
        {
          state.todo.data?.map((todo, id) => (
            // Each todo item is displayed as a paragraph
            <p key={id}>{todo.id} - {todo.title}</p>
          ))
        }
      </div>
    </>
  )
}

// Export the App component as the default export
export default App;


```